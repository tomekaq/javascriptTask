<html>

<head>
    <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
    <script>

        window.onload = function () {
            document.getElementById("button").style.display = 'none';
        }

        function validate() {
            var fileNumber = parseInt($("#textbox1").attr("value"));
            var MaxValue = parseInt($("#textbox2").attr("value"));

            if (fileNumber == 0 | isNaN(fileNumber)) {
                alert("Wprowadz ile liczb wygenerować ");
            }
            else if (MaxValue == 0 | isNaN(MaxValue)) {
                alert("Wprowadz maksymalną wartość");
            }
            else if (MaxValue < 0) {
                alert("Maksymalna wartość musi być większa od zera");
            }
            else if (MaxValue > 2147483647) {
                alert("Maksymalna wartość musi być mniejsza niż 2147483647");
            }
            else {
                $("#textbox1").attr("disabled", true);
                $("#textbox2").attr("disabled", true);
            }
        }

        //$("#mybutton").click(function () {

        //    windows.alert("hi");

        //});

        //$("#mybutton").click(function () {
        //    var test = $('<button>', {
        //        Text: 'Generuj'
        //    }).wrap('<tr><td></td></tr>').closest('tr');

        //    $("#addNodeTable tr:last").before(test);
        //});

        $(function () {
            $('#button').click(function () {
                var fileNumber = parseInt($("#textbox1").attr("value"));
                var MaxValue = parseInt($("#textbox2").attr("value"));
                var getUrl = '@Url.Action("Download","Home")';

                $.ajax({
                    url: '/Home/GenerateFile',
                    dataType: "json",
                    type: "POST",
                    contentType: 'application/json; charset=utf-8',
                    data: JSON.stringify({ file: { FileAmount: fileNumber, MaxValue: MaxValue } }),
                    async: true,
                    processData: false,
                    cache: false,
                    success: function (data) {
                        if (data.success)
                            window.location = getUrl + "?fileName=" + data.fName;
                    },
                    error: function (xhr) {
                        alert('error');
                    }
                });
            });
        });

        function reset() {

            $("#textbox1").attr("disabled", false);
            $("#textbox1").attr("value", 0);
            $("#textbox2").attr("disabled", false);
            $("#textbox2").attr("value", 0);
        }

    </script>

</head>

<body>
    <form name="inputFile">
        <p>Wprowadź ile liczb wygenerować: <input type="text" size="20" id="textbox1" name="fileAmount" value="34"></p>
        <p>Wprowadź maksymalną wartość:    <input type="text" size="20" id="textbox2" name="maxValue" value="34"></p>
        <p><input type="button" id="okButton" name="submit" value="OK" onclick="validate()"></p>
    </form>
    <p><input type="button" id="reset" value="Resetuj" onclick="reset()" /></p>
    <p><input type="button" id="button" value="Generuj" /></p>
    <p>
        <input type="button" id="mybutton" height="200" width="1000" name="myButton" value="dskfje" />
    </p>
</body>

</html>
